{"version":3,"sources":["components/loaders/mapvisualizer.js","components/mapexplorer.js"],"names":["MapVisualizerLoader","width","statistic","windowWidth","window","innerWidth","mapHeight","height","MAP_LEGEND_HEIGHT","viewBox","speed","backgroundColor","COLORS","cx","cy","r","MapVisualizer","lazy","React","memo","stateCode","data","regionHighlighted","setRegionHighlighted","anchor","setAnchor","mapStatistic","setMapStatistic","isCountryLoaded","t","useTranslation","history","useHistory","mapExplorerRef","useRef","useState","code","view","MAP_VIEWS","DISTRICTS","option","MAP_META","mapType","MAP_TYPES","COUNTRY","MAP_OPTIONS","HOTSPOTS","TOTAL","currentMap","setCurrentMap","currentMapMeta","currentMapData","useEffect","districtName","PER_MILLION","STATE","ZONES","STATES","switchMap","useCallback","newMapMeta","districts","topDistrict","Object","keys","sort","a","b","getStatistic","ReactDOM","unstable_batchedUpdates","panelState","useMemo","stateData","produce","draft","state","STATE_NAMES","hoveredRegion","hoveredData","name","population_millions","STATE_POPULATIONS_MIL","springs","useSprings","MAP_STATISTICS","length","map","total","delta","from","config","tension","clamp","className","classnames","stickied","hidden","onClick","action","index","key","focused","capitalize","h1","interpolate","formatNumber","Math","floor","h6","tested","date","formatDate","meta","href","source","target","push","formatLastUpdated","zone","UNKNOWN_DISTRICT_KEY","ref","fallback","current","clientWidth","changeMap","values","handleTabClick","style","color","prevProps","currProps","equal","TT"],"mappings":"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","file":"static/js/MapExplorer.d63c2c73.chunk.js","sourcesContent":["import {COLORS, MAP_LEGEND_HEIGHT} from '../../constants';\n\nimport React from 'react';\nimport ContentLoader from 'react-content-loader';\n\n// Margins as declared in CSS\nexport const MAP_BUFFER_MARGINS = 42;\nexport const INDIA_ASPECT_RATIO = 0.885;\n\nconst MapVisualizerLoader = ({width, statistic}) => {\n  const windowWidth = window.innerWidth;\n  // Default width for loader\n  if (!width) width = windowWidth > 769 ? 480 : windowWidth;\n  // From CSS\n  const scalingFactor = windowWidth > 769 ? 0.9 : 1;\n  const mapHeight = (scalingFactor * width) / INDIA_ASPECT_RATIO;\n  const height = MAP_BUFFER_MARGINS + MAP_LEGEND_HEIGHT + mapHeight;\n  return (\n    <ContentLoader\n      viewBox={`0 0 ${width} ${height}`}\n      height={height}\n      width={width}\n      speed={2}\n      backgroundColor={COLORS[statistic]}\n    >\n      <circle cx={0.4 * width} cy={height / 2} r=\"5\" />\n      <circle cx={0.5 * width} cy={height / 2} r=\"5\" />\n      <circle cx={0.6 * width} cy={height / 2} r=\"5\" />\n    </ContentLoader>\n  );\n};\n\nexport default MapVisualizerLoader;\n","import MapVisualizerLoader from './loaders/mapvisualizer';\n\nimport {\n  MAP_META,\n  MAP_OPTIONS,\n  MAP_STATISTICS,\n  MAP_TYPES,\n  MAP_VIEWS,\n  STATE_NAMES,\n  STATE_POPULATIONS_MIL,\n  UNKNOWN_DISTRICT_KEY,\n} from '../constants';\nimport {\n  capitalize,\n  formatNumber,\n  formatDate,\n  formatLastUpdated,\n  getStatistic,\n} from '../utils/commonfunctions';\n\nimport {PinIcon} from '@primer/octicons-v2-react';\nimport classnames from 'classnames';\nimport equal from 'fast-deep-equal';\nimport produce from 'immer';\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n  Suspense,\n  lazy,\n} from 'react';\nimport ReactDOM from 'react-dom';\nimport * as Icon from 'react-feather';\nimport {useTranslation} from 'react-i18next';\nimport {useHistory} from 'react-router-dom';\nimport {useSprings, animated} from 'react-spring';\n\nconst MapVisualizer = lazy(() =>\n  import('./mapvisualizer' /* webpackChunkName: \"MapVisualizer\" */)\n);\n\nfunction MapExplorer({\n  stateCode,\n  data,\n  regionHighlighted,\n  setRegionHighlighted,\n  anchor,\n  setAnchor,\n  mapStatistic,\n  setMapStatistic,\n  isCountryLoaded = true,\n}) {\n  const {t} = useTranslation();\n  const history = useHistory();\n\n  const mapExplorerRef = useRef();\n\n  const [currentMap, setCurrentMap] = useState({\n    code: stateCode,\n    view: MAP_VIEWS.DISTRICTS,\n    option:\n      MAP_META[stateCode].mapType === MAP_TYPES.COUNTRY\n        ? MAP_OPTIONS.HOTSPOTS\n        : MAP_OPTIONS.TOTAL,\n  });\n  const currentMapMeta = MAP_META[currentMap.code];\n\n  const currentMapData =\n    currentMapMeta.mapType === MAP_TYPES.COUNTRY\n      ? data\n      : {[currentMap.code]: data[currentMap.code]};\n\n  useEffect(() => {\n    if (regionHighlighted.districtName) {\n      if (\n        currentMap.code !== regionHighlighted.stateCode &&\n        !(\n          currentMapMeta.mapType === MAP_TYPES.COUNTRY &&\n          currentMap.view === MAP_VIEWS.DISTRICTS\n        )\n      ) {\n        const newMapMeta = MAP_META[regionHighlighted.stateCode];\n        if (!newMapMeta) {\n          return;\n        }\n        setCurrentMap({\n          code: regionHighlighted.stateCode,\n          view: MAP_VIEWS.DISTRICTS,\n          option:\n            currentMap.option === MAP_OPTIONS.PER_MILLION\n              ? MAP_OPTIONS.TOTAL\n              : currentMap.option,\n        });\n      }\n    } else if (isCountryLoaded && currentMapMeta.mapType === MAP_TYPES.STATE) {\n      setCurrentMap({\n        code: 'TT',\n        view:\n          currentMap.option === MAP_OPTIONS.ZONES\n            ? MAP_VIEWS.DISTRICTS\n            : MAP_VIEWS.STATES,\n        option: currentMap.option,\n      });\n    }\n  }, [\n    isCountryLoaded,\n    regionHighlighted.stateCode,\n    regionHighlighted.districtName,\n    currentMap.code,\n    currentMap.option,\n    currentMap.view,\n    currentMapMeta.mapType,\n  ]);\n\n  const switchMap = useCallback(\n    (stateCode) => {\n      const newMapMeta = MAP_META[stateCode];\n      if (!newMapMeta) {\n        return;\n      }\n      if (newMapMeta.mapType === MAP_TYPES.STATE) {\n        const districts = data[stateCode].districts || {};\n        const topDistrict = Object.keys(districts).sort(\n          (a, b) =>\n            getStatistic(districts[b], 'total', mapStatistic) -\n            getStatistic(districts[a], 'total', mapStatistic)\n        )[0];\n        ReactDOM.unstable_batchedUpdates(() => {\n          setRegionHighlighted({\n            stateCode: stateCode,\n            districtName: topDistrict,\n          });\n          setCurrentMap({\n            code: stateCode,\n            view: MAP_VIEWS.DISTRICTS,\n            option:\n              currentMap.option === MAP_OPTIONS.PER_MILLION\n                ? MAP_OPTIONS.TOTAL\n                : currentMap.option,\n          });\n        });\n      } else {\n        ReactDOM.unstable_batchedUpdates(() => {\n          setCurrentMap({\n            code: 'TT',\n            view:\n              currentMap.option === MAP_OPTIONS.HOTSPOTS\n                ? MAP_VIEWS.DISTRICTS\n                : MAP_VIEWS.STATES,\n            option: currentMap.option,\n          });\n          setRegionHighlighted({\n            stateCode: 'TT',\n            districtName: null,\n          });\n        });\n      }\n    },\n    [data, currentMap.option, mapStatistic, setRegionHighlighted]\n  );\n\n  useEffect(() => {\n    switchMap(stateCode);\n  }, [stateCode, switchMap]);\n\n  const panelState = useMemo(() => {\n    const stateCode =\n      currentMap.view === MAP_VIEWS.STATES\n        ? regionHighlighted.stateCode\n        : currentMap.code;\n    const stateData = data[stateCode] || {};\n    return produce(stateData, (draft) => {\n      draft.state = STATE_NAMES[stateCode];\n    });\n  }, [data, regionHighlighted.stateCode, currentMap.view, currentMap.code]);\n\n  const hoveredRegion = useMemo(() => {\n    const hoveredData =\n      (regionHighlighted.districtName\n        ? data[regionHighlighted.stateCode]?.districts?.[\n            regionHighlighted.districtName\n          ]\n        : data[regionHighlighted.stateCode]) || {};\n    return produce(hoveredData, (draft) => {\n      draft.name =\n        regionHighlighted.districtName ||\n        STATE_NAMES[regionHighlighted.stateCode];\n      if (!regionHighlighted.districtName)\n        draft.population_millions =\n          STATE_POPULATIONS_MIL[regionHighlighted.stateCode];\n    });\n  }, [data, regionHighlighted.stateCode, regionHighlighted.districtName]);\n\n  const handleTabClick = (option) => {\n    switch (option) {\n      case MAP_OPTIONS.TOTAL:\n        setCurrentMap({\n          code: currentMap.code,\n          view:\n            currentMapMeta.mapType === MAP_TYPES.COUNTRY\n              ? MAP_VIEWS.STATES\n              : MAP_VIEWS.DISTRICTS,\n          option: MAP_OPTIONS.TOTAL,\n        });\n        if (currentMapMeta.mapType === MAP_TYPES.COUNTRY)\n          setRegionHighlighted({\n            stateCode: regionHighlighted.stateCode,\n            districtName: null,\n          });\n        return;\n      case MAP_OPTIONS.PER_MILLION:\n        if (currentMapMeta.mapType === MAP_TYPES.STATE) return;\n        setCurrentMap({\n          code: currentMap.code,\n          view: MAP_VIEWS.STATES,\n          option: MAP_OPTIONS.PER_MILLION,\n        });\n        setRegionHighlighted({\n          stateCode: regionHighlighted.stateCode,\n          districtName: null,\n        });\n        return;\n      case MAP_OPTIONS.HOTSPOTS:\n        setCurrentMap({\n          code: currentMap.code,\n          view: MAP_VIEWS.DISTRICTS,\n          option: MAP_OPTIONS.HOTSPOTS,\n        });\n        return;\n      case MAP_OPTIONS.ZONES:\n        setCurrentMap({\n          code: currentMap.code,\n          view: MAP_VIEWS.DISTRICTS,\n          option: MAP_OPTIONS.ZONES,\n        });\n        if (currentMapMeta.mapType === MAP_TYPES.COUNTRY)\n          setRegionHighlighted({\n            stateCode: 'TT',\n            districtName: null,\n          });\n        return;\n      default:\n        return;\n    }\n  };\n\n  const springs = useSprings(\n    MAP_STATISTICS.length,\n    MAP_STATISTICS.map((statistic) => ({\n      total: getStatistic(panelState, 'total', statistic),\n      delta: getStatistic(panelState, 'delta', statistic),\n      from: {\n        total: getStatistic(panelState, 'total', statistic),\n        delta: getStatistic(panelState, 'delta', statistic),\n      },\n      config: {\n        tension: 500,\n        clamp: true,\n      },\n    }))\n  );\n\n  return (\n    <div\n      className={classnames(\n        'MapExplorer',\n        {stickied: anchor === 'mapexplorer'},\n        {hidden: anchor && anchor !== 'mapexplorer'}\n      )}\n    >\n      {window.innerWidth > 769 && (\n        <div\n          className={classnames('anchor', {stickied: anchor === 'mapexplorer'})}\n          onClick={() => {\n            setAnchor(anchor === 'mapexplorer' ? null : 'mapexplorer');\n          }}\n        >\n          <PinIcon />\n        </div>\n      )}\n\n      <div className=\"header\">\n        <h1>\n          {currentMap.code === 'TT'\n            ? t('India')\n            : t(STATE_NAMES[currentMap.code])}{' '}\n          {t('Map')}\n        </h1>\n        <h6>\n          {t('{{action}} over a {{mapType}} for more details', {\n            action: t(window.innerWidth <= 769 ? 'Tap' : 'Hover'),\n            mapType: t(\n              currentMapMeta.mapType === MAP_TYPES.COUNTRY\n                ? 'state/UT'\n                : 'District'\n            ),\n          })}\n        </h6>\n      </div>\n\n      <div className=\"map-stats\">\n        {MAP_STATISTICS.map((statistic, index) => (\n          <div\n            key={statistic}\n            className={classnames('stats', statistic, {\n              focused: statistic === mapStatistic,\n            })}\n            onClick={() => setMapStatistic(statistic)}\n          >\n            <h5>{t(capitalize(statistic))}</h5>\n            <div className=\"stats-bottom\">\n              <animated.h1>\n                {springs[index].total.interpolate((total) =>\n                  formatNumber(Math.floor(total))\n                )}\n              </animated.h1>\n              {statistic !== 'tested' && statistic !== 'active' && (\n                <animated.h6>\n                  {springs[index].delta.interpolate((delta) =>\n                    delta > 0 ? `+${formatNumber(Math.floor(delta))}` : '\\u00A0'\n                  )}\n                </animated.h6>\n              )}\n              {statistic === 'tested' && (\n                <h6>\n                  {panelState?.total?.tested &&\n                    t('As of {{date}}', {\n                      date: formatDate(\n                        panelState.meta.tested['last_updated'],\n                        'dd MMM'\n                      ),\n                    })}\n                </h6>\n              )}\n            </div>\n            {statistic === 'tested' && panelState?.total?.tested && (\n              <a href={panelState.meta.tested.source} target=\"_noblank\">\n                <Icon.Link />\n              </a>\n            )}\n          </div>\n        ))}\n      </div>\n\n      <div className=\"meta\">\n        {currentMapMeta.mapType === MAP_TYPES.STATE && (\n          <div\n            className=\"map-button\"\n            onClick={() => history.push(`state/${currentMap.code}`)}\n          >\n            {t('Visit state page')}\n            <Icon.ArrowRightCircle />\n          </div>\n        )}\n\n        {currentMapMeta.mapType !== MAP_TYPES.STATE &&\n          panelState?.meta?.['last_updated'] && (\n            <div className=\"last-update\">\n              <h6>{t('Last updated')}</h6>\n              <h3>\n                {`${formatLastUpdated(panelState.meta['last_updated'])} ${t(\n                  'ago'\n                )}`}\n              </h3>\n            </div>\n          )}\n\n        <h2\n          className={classnames(mapStatistic, {\n            [hoveredRegion?.zone]: currentMap.option === MAP_OPTIONS.ZONES,\n          })}\n        >\n          {t(hoveredRegion.name)}\n          {hoveredRegion.name === UNKNOWN_DISTRICT_KEY &&\n            ` (${t(STATE_NAMES[regionHighlighted.stateCode])})`}\n        </h2>\n\n        {currentMapMeta.mapType === MAP_TYPES.STATE && (\n          <div className=\"map-button\" onClick={() => switchMap('TT')}>\n            {t('Back')}\n          </div>\n        )}\n\n        {currentMap.option !== MAP_OPTIONS.ZONES &&\n          ((currentMap.view === MAP_VIEWS.DISTRICTS &&\n            regionHighlighted.districtName) ||\n            (currentMap.view === MAP_VIEWS.STATES &&\n              currentMap.option !== MAP_OPTIONS.TOTAL)) && (\n            <h1 className={classnames('district', mapStatistic)}>\n              {formatNumber(\n                getStatistic(\n                  hoveredRegion,\n                  'total',\n                  mapStatistic,\n                  currentMap.option === MAP_OPTIONS.PER_MILLION\n                    ? hoveredRegion.population_millions\n                    : 1\n                )\n              )}\n              <br />\n              <span>\n                {t(mapStatistic)}\n                {currentMap.option === MAP_OPTIONS.PER_MILLION &&\n                  ` ${t('per million')}`}\n              </span>\n            </h1>\n          )}\n      </div>\n\n      <div ref={mapExplorerRef}>\n        {mapStatistic && (\n          <Suspense\n            fallback={\n              <MapVisualizerLoader\n                className=\"map-loader\"\n                {...{\n                  width: mapExplorerRef.current?.clientWidth,\n                  statistic: mapStatistic,\n                }}\n              />\n            }\n          >\n            <MapVisualizer\n              currentMap={currentMap}\n              data={currentMapData}\n              changeMap={switchMap}\n              regionHighlighted={regionHighlighted}\n              setRegionHighlighted={setRegionHighlighted}\n              statistic={mapStatistic}\n              isCountryLoaded={isCountryLoaded}\n            />\n          </Suspense>\n        )}\n      </div>\n\n      <div className=\"tabs-map\">\n        {Object.values(MAP_OPTIONS).map((option) => (\n          <div\n            key={option}\n            className={classnames('tab', {\n              focused: currentMap.option === option,\n            })}\n            onClick={() => handleTabClick(option)}\n          >\n            <h4>\n              {t(option)}\n              {option === MAP_OPTIONS.PER_MILLION && <sup>&dagger;</sup>}\n            </h4>\n          </div>\n        ))}\n      </div>\n\n      <h6 className={classnames('footnote')}>\n        &dagger; {`${t('Based on 2019 population projection by NCP, see ')}`}\n        <a\n          href=\"https://nhm.gov.in/New_Updates_2018/Report_Population_Projection_2019.pdf\"\n          target=\"_noblank\"\n          style={{color: '#6c757d'}}\n        >\n          {t('source')}\n        </a>\n      </h6>\n    </div>\n  );\n}\n\nconst isEqual = (prevProps, currProps) => {\n  if (!equal(prevProps.stateCode, currProps.stateCode)) {\n    return false;\n  } else if (!equal(prevProps.regionHighlighted, currProps.regionHighlighted)) {\n    return false;\n  } else if (!equal(prevProps.mapStatistic, currProps.mapStatistic)) {\n    return false;\n  } else if (!equal(prevProps.anchor, currProps.anchor)) {\n    return false;\n  } else if (\n    !equal(\n      prevProps.data?.TT?.meta?.['last_updated'],\n      currProps.data?.TT?.meta?.['last_updated']\n    )\n  ) {\n    return false;\n  } else if (!equal(prevProps.data?.TT?.total, currProps.data?.TT?.total)) {\n    return false;\n  }\n  return true;\n};\n\nexport default React.memo(MapExplorer, isEqual);\n"],"sourceRoot":""}